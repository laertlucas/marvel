/* 
This is still a work in progress 
*/

var fakeData = {
    "code": 200,
    "status": "Ok",
    "copyright": "© 2016 MARVEL",
    "attributionText": "Data provided by Marvel. © 2016 MARVEL",
    "attributionHTML": "<a href=\"http://marvel.com\">Data provided by Marvel. © 2016 MARVEL</a>",
    "etag": "2f6cc7d3cb4a9cc3971839a77d0387e1f7f0dd62",
    "data": {
        "offset": 0,
        "limit": 20,
        "total": 1,
        "count": 1,
        "results": [
            {
                "id": 1009610,
                "name": "Spider-Man",
                "description": "Bitten by a radioactive spider, high school student Peter Parker gained the speed, strength and powers of a spider. Adopting the name Spider-Man, Peter hoped to start a career using his new abilities. Taught that with great power comes great responsibility, Spidey has vowed to use his powers to help people.",
                "modified": "2014-06-02T12:35:16-0400",
                "thumbnail": {
                    "path": "http://i.annihil.us/u/prod/marvel/i/mg/3/50/526548a343e4b",
                    "extension": "jpg"
                },
                "resourceURI": "http://gateway.marvel.com/v1/public/characters/1009610",
                "comics": {
                    "available": 2651,
                    "collectionURI": "http://gateway.marvel.com/v1/public/characters/1009610/comics",
                    "items": [
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/320",
                            "name": "Actor Presents Spider-Man and the Incredible Hulk (2003) #1"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/30885",
                            "name": "Age of Heroes (Trade Paperback)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/30090",
                            "name": "Age of Heroes (2010) #1"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/37255",
                            "name": "Alias Omnibus (Hardcover)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/46847",
                            "name": "Alpha (2013) #0.1"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/46848",
                            "name": "Alpha (2013) #1"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/12637",
                            "name": "Alpha Flight (1983) #1"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/12668",
                            "name": "Alpha Flight (1983) #127"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/6233",
                            "name": "Alpha Flight Classic Vol. 1 (Trade Paperback)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/3105",
                            "name": "Amazing Fantasy (2004) #15"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/16926",
                            "name": "Amazing Fantasy (1962) #15"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/41139",
                            "name": "Amazing Fantasy 15: Spider-Man! (2011) #1"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/16214",
                            "name": "Amazing Fantasy Omnibus (Hardcover)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/5286",
                            "name": "Amazing Spider-Girl (2006)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/16151",
                            "name": "Amazing Spider-Girl (2006) #11"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/13519",
                            "name": "Amazing Spider-Girl Vol. 1: Whatever Happened to the Daughter of Spider-Man (Trade Paperback)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/17305",
                            "name": "Amazing Spider-Girl Vol. 2: Comes the Carnage! (Trade Paperback)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/37894",
                            "name": "Amazing Spider-Man (1999) #1"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/6482",
                            "name": "Amazing Spider-Man (1963) #1"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/comics/56495",
                            "name": "Amazing Spider-Man (2015) #1.5"
                        }
                    ],
                    "returned": 20
                },
                "series": {
                    "available": 550,
                    "collectionURI": "http://gateway.marvel.com/v1/public/characters/1009610/series",
                    "items": [
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/458",
                            "name": "Actor Presents Spider-Man and the Incredible Hulk (2003)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/9790",
                            "name": "Age of Heroes (2010)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/10235",
                            "name": "Age of Heroes (2011)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/17318",
                            "name": "Age of Ultron (2013)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/13383",
                            "name": "Alias Omnibus (2006)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/17650",
                            "name": "Alpha (2013 - Present)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/2116",
                            "name": "Alpha Flight (1983 - 1994)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/1983",
                            "name": "Alpha Flight Classic Vol. 1 (2007)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/769",
                            "name": "Amazing Fantasy (2004 - 2006)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/2987",
                            "name": "Amazing Fantasy (1962)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/15280",
                            "name": "Amazing Fantasy 15: Spider-Man! (2011 - 2012)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/2707",
                            "name": "Amazing Fantasy Omnibus (2007)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/1126",
                            "name": "Amazing Spider-Girl (2006 - 2009)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/2234",
                            "name": "Amazing Spider-Girl Vol. 1: Whatever Happened to the Daughter of Spider-Man (2007)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/3101",
                            "name": "Amazing Spider-Girl Vol. 2: Comes the Carnage! (2007)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/20694",
                            "name": "Amazing Spider-Man (2015 - Present)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/17285",
                            "name": "Amazing Spider-Man (2014 - Present)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/1987",
                            "name": "Amazing Spider-Man (1963 - 1998)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/454",
                            "name": "Amazing Spider-Man (1999 - 2013)"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/series/20432",
                            "name": "Amazing Spider-Man (2015 - Present)"
                        }
                    ],
                    "returned": 20
                },
                "stories": {
                    "available": 4260,
                    "collectionURI": "http://gateway.marvel.com/v1/public/characters/1009610/stories",
                    "items": [
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/483",
                            "name": "Interior #483",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/486",
                            "name": "Cover #486",
                            "type": "cover"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/487",
                            "name": "Interior #487",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/499",
                            "name": "Interior #499",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/599",
                            "name": "Interior #599",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/805",
                            "name": "Interior #805",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/824",
                            "name": "Cover #824",
                            "type": "cover"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/838",
                            "name": "3 of 3 - Family Business",
                            "type": "cover"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/842",
                            "name": "1 of 1 -  Secret of the Spider Shop",
                            "type": "cover"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/867",
                            "name": "Interior #867",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1018",
                            "name": "Cover #1018",
                            "type": "cover"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1019",
                            "name": "Interior #1019",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1020",
                            "name": "Cover #1020",
                            "type": "cover"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1021",
                            "name": "Interior #1021",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1022",
                            "name": "Cover #1022",
                            "type": "cover"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1023",
                            "name": "Interior #1023",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1076",
                            "name": "4 of 4 - Golden Age",
                            "type": "cover"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1125",
                            "name": "6 of 6 - Sins Past",
                            "type": "cover"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1126",
                            "name": "6 of 6 - Sins Past",
                            "type": "interiorStory"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/stories/1134",
                            "name": "Interior #1134",
                            "type": "interiorStory"
                        }
                    ],
                    "returned": 20
                },
                "events": {
                    "available": 31,
                    "collectionURI": "http://gateway.marvel.com/v1/public/characters/1009610/events",
                    "items": [
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/116",
                            "name": "Acts of Vengeance!"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/314",
                            "name": "Age of Ultron"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/233",
                            "name": "Atlantis Attacks"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/234",
                            "name": "Avengers Disassembled"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/310",
                            "name": "Avengers VS X-Men"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/296",
                            "name": "Chaos War"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/238",
                            "name": "Civil War"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/318",
                            "name": "Dark Reign"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/240",
                            "name": "Days of Future Present"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/246",
                            "name": "Evolutionary War"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/302",
                            "name": "Fear Itself"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/251",
                            "name": "House of M"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/252",
                            "name": "Inferno"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/253",
                            "name": "Infinity Gauntlet"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/255",
                            "name": "Initiative"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/258",
                            "name": "Kraven's Last Hunt"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/151",
                            "name": "Maximum Carnage"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/37",
                            "name": "Maximum Security"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/154",
                            "name": "Onslaught"
                        },
                        {
                            "resourceURI": "http://gateway.marvel.com/v1/public/events/266",
                            "name": "Other - Evolve or Die"
                        }
                    ],
                    "returned": 20
                },
                "urls": [
                    {
                        "type": "detail",
                        "url": "http://marvel.com/comics/characters/1009610/spider-man?utm_campaign=apiRef&utm_source=27845e47572034143fb1218298df0114"
                    },
                    {
                        "type": "wiki",
                        "url": "http://marvel.com/universe/Spider-Man_(Peter_Parker)?utm_campaign=apiRef&utm_source=27845e47572034143fb1218298df0114"
                    },
                    {
                        "type": "comiclink",
                        "url": "http://marvel.com/comics/characters/1009610/spider-man?utm_campaign=apiRef&utm_source=27845e47572034143fb1218298df0114"
                    }
                ]
            }
        ]
    }
};

/* ------------------------------------------------------------------ */

//variables
var $el = $(".container");
var $name = $el.find("#name");
var $submit = $el.find("#submit");
var $results = $el.find("#results");

//bind events
$submit.on("click", getCharacter);

//functions
function getCharacter() {
    var name = $name.val().replace(" ", "-");
    getData(name);
    $name.val("");
}

function getData(name) {
    $results.html("");
    var puKey = '27845e47572034143fb1218298df0114';

    $.ajax({
        url: 'https://gateway.marvel.com:443/v1/public/characters?name=' + name + '&apikey=' + puKey,
        //url: 'https://gateway.marvel.com/v1/public/comics?ts=1&apikey=e092564c1b351a44e048566a0317a926&hash=651058c6a8e438cc3a5078b15d41a10f',
        type: "GET",
        dataType: "json",
        success: function (json) {
            var html = '<h2>' + json.data.results[0].name + '</h2>';
            html += '<div class="row"><div class="col-md-6 col-md-offset-3"><img class="character-img" src="' + json.data.results[0].thumbnail.path + '.' + json.data.results[0].thumbnail.extension + '" /></div></div>';
            html += '<div class="row"><div class="col-md-8 col-md-offset-2"><p>' + json.data.results[0].description + '</p></div></div>';

            html += '<div class="row"><div class="col-md-6"><h3>Top Comics</h3><ul>';
            for (var i = 0; i < json.data.results[0].comics.items.length; i++) {
                html += '<li>' + json.data.results[0].comics.items[i].name + '</li>';
            }
            html += '</ul></div><div class="col-md-6"><h3>Top Series</h3><ul>';
            for (var j = 0; j < json.data.results[0].series.items.length; j++) {
                html += '<li>' + json.data.results[0].series.items[j].name + '</li>';
            }
            html += '</ul></div></div><div class="row"><div class="col-md-6"><h3>Top Stories</h3><ul>';
            for (var n = 0; n < json.data.results[0].stories.items.length; n++) {
                html += '<li>' + json.data.results[0].stories.items[n].name + '</li>';
            }
            html += '</ul></div><div class="col-md-6"><h3>Top Events</h3><ul>';
            for (var m = 0; m < json.data.results[0].events.items.length; m++) {
                html += '<li>' + json.data.results[0].events.items[m].name + '</li>';
            }
            html += '</ul></div></div><div class="row"><div class="col-md-6"><h3>Other Links</h3><ul>';
            for (var p = 0; p < json.data.results[0].urls.length; p++) {
                html += '<li><a href="' + json.data.results[0].urls[p].url + '" target="_blank">' + json.data.results[0].urls[p].type + '</a></li>';
            }
            html += '</ul></div></div>';

            html += '<footer><a href="https://www.marvel.com" target="_blank">' + json.attributionText + '</a></footer>';

            $results.append(html);

        },
        error: function (error) {
            alert("There was an error loading your data! Please make sure everything is spelled correctly");
        }
    });

}
